<!DOCTYPE html>
<html>
<head>
  <title>Application and Student Map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
    <style>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>


<div id="map"></div>

<script src="leaflet-heat.js"></script>

<script>


var heatPoints = [
  <% points.select{|x| x["lat"].to_f > 0}.each do |point| %>
  [<%= [point['lat'], point['lng'], 50].join(", ") %>],
  <% end %>
]

L.mapbox.accessToken = 'pk.eyJ1IjoiZG9ya3RyYW4iLCJhIjoiY2luZHRpbXpkMHg4cXU4bHd5c3FnazkydCJ9.H435h5VZM7E3uJQ_3WuZ4Q';
var map = L.mapbox.map('map', 'mapbox.streets')
    .setView([29.75454, -95.36502], 11);


var heat = L.heatLayer(heatPoints, {radius: 15}).addTo(map);



</script>
</body>
</html>
